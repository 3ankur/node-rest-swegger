{"version":3,"sources":["../../../api/controllers/swagger.js"],"names":["express","require","router","Router","options","swaggerDefinition","info","title","version","description","tags","name","schemes","basePath","apis","swaggerJSDoc","swaggerUi","swaggerSpec","get","req","res","setHeader","send","use","serve","setup","validateModel","model","responseValidation","valid","console","error","errors","Error","module","exports"],"mappings":";;;;;;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,SAASF,QAAQG,MAAR,EAAf;;AAEA,IAAMC,UAAU;AACdC,qBAAmB;AACjBC,UAAM;AACJC,aAAO,aADH;AAEJC,eAAS,OAFL;AAGJC,mBAAa;AACb;AACA;AACA;AANI,KADW;AASjBC,UAAM;AAEFC,YAAM,SAFJ;AAGFF,mBAAa;AAHX,qCAII,SAJJ,wCAKW,aALX,SATW;AAiBjBG,aAAS,CAAC,OAAD,CAjBQ;AAkBlB;AACCC,cAAU;AAnBO,GADL;AAsBdC,QAAM,CAAC,8BAAD,EAAiC,4BAAjC;AAER;;AAxBgB,CAAhB,CA0BA,IAAMC,eAAed,QAAQ,eAAR,CAArB;AACA,IAAMe,YAAYf,QAAQ,oBAAR,CAAlB;AACA,IAAMgB,cAAcF,aAAaX,OAAb,CAApB;AACAH,QAAQ,yBAAR,EAAmCgB,WAAnC;;AAEAf,OAAOgB,GAAP,CAAW,OAAX,EAAoB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AACtCA,MAAIC,SAAJ,CAAc,cAAd,EAA8B,kBAA9B;AACAD,MAAIE,IAAJ,CAASL,WAAT;AACD,CAHD;;AAKAf,OAAOqB,GAAP,CAAW,GAAX,EAAgBP,UAAUQ,KAA1B,EAAiCR,UAAUS,KAAV,CAAgBR,WAAhB,CAAjC;;AAEA,SAASS,aAAT,CAAwBf,IAAxB,EAA8BgB,KAA9B,EAAqC;AACnC,MAAMC,qBAAqBX,YAAYS,aAAZ,CAA0Bf,IAA1B,EAAgCgB,KAAhC,EAAuC,KAAvC,EAA8C,IAA9C,CAA3B;AACA,MAAI,CAACC,mBAAmBC,KAAxB,EAA+B;AAC7BC,YAAQC,KAAR,CAAcH,mBAAmBI,MAAjC;AACA,UAAM,IAAIC,KAAJ,yCAAN;AACD;AACF;;AAEDC,OAAOC,OAAP,GAAiB;AACfjC,gBADe;AAEfwB;AAFe,CAAjB","file":"swagger.js","sourcesContent":["const express = require('express')\r\nconst router = express.Router()\r\n\r\nconst options = {\r\n  swaggerDefinition: {\r\n    info: {\r\n      title: 'STTM - REST',\r\n      version: '1.0.0',\r\n      description: 'STTM Mapper Rest API',\r\n      // contact: {\r\n      //   email: '3ankur.v@gmail.com'\r\n      // }\r\n    },\r\n    tags: [\r\n      {\r\n        name: 'stocks1',\r\n        description: 'Stocks API',\r\n        name: 'Mapping',\r\n        description: 'Mapping API'\r\n      }\r\n    ],\r\n    schemes: [\"https\"],\r\n   // host: 'localhost:3000',\r\n    basePath: '/api'\r\n  },\r\n  apis: ['./api/controllers/mapping.js', './api/models/sttm-model.js']\r\n}\r\n//'./api/controllers/stocks.js', './api/models/stock-model.js',\r\n\r\nconst swaggerJSDoc = require('swagger-jsdoc')\r\nconst swaggerUi = require('swagger-ui-express')\r\nconst swaggerSpec = swaggerJSDoc(options)\r\nrequire('swagger-model-validator')(swaggerSpec)\r\n\r\nrouter.get('/json', function (req, res) {\r\n  res.setHeader('Content-Type', 'application/json')\r\n  res.send(swaggerSpec)\r\n})\r\n\r\nrouter.use('/', swaggerUi.serve, swaggerUi.setup(swaggerSpec))\r\n\r\nfunction validateModel (name, model) {\r\n  const responseValidation = swaggerSpec.validateModel(name, model, false, true)\r\n  if (!responseValidation.valid) {\r\n    console.error(responseValidation.errors)\r\n    throw new Error(`Model doesn't match Swagger contract`)\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  router,\r\n  validateModel\r\n}\r\n"]}